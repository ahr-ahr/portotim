---
const {
  title = "Portofolio Tim",
  description = "Kami berdua membangun web/app cepat & bersih",
  ogTitle = title,
} = Astro.props;

const year = new Date().getFullYear();
---

<!doctype html>
<html lang="id" class="scroll-smooth">
  <head>
    <script>
  // Set theme seawal mungkin untuk cegah flicker
  (function () {
    const ls = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const shouldDark = ls ? ls === 'dark' : systemDark;
    if (shouldDark) document.documentElement.classList.add('dark');
    // (Opsional) set meta theme-color agar status bar mobile cocok
    const meta = document.querySelector('meta[name="theme-color"]') || (function(){
      const m = document.createElement('meta');
      m.name = 'theme-color';
      document.head.appendChild(m);
      return m;
    })();
    meta.content = shouldDark ? '#0b0f19' : '#ffffff';
  })();
</script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="theme-color">
    <meta name="description" content={description} />
    <meta property="og:title" content={ogTitle} />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content={`${Astro.site?.toString() ?? ""}/og.png`}
    />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />


    <style is:global>
        :root { color-scheme: light dark; }

  /* State awal */
  #project-container .project-card {
    opacity: 0;
    transform: translateY(10px);
    will-change: opacity, transform;
  }
  /* Saat terlihat */
  #project-container .project-card.in-view {
    opacity: 1;
    transform: none;
    transition: opacity .5s ease, transform .5s ease;
  }
  /* state awal */
  .reveal {
    opacity: 0;
    transform: translateY(12px);
    will-change: opacity, transform;
    transition: opacity .6s ease, transform .6s ease;
    transition-delay: var(--d, 0ms); /* bisa di-stagger per elemen */
  }
  /* saat terlihat */
  .reveal.is-visible {
    opacity: 1;
    transform: none;
  }
  /* Hormati prefers-reduced-motion */
  @media (prefers-reduced-motion: reduce) {
    #project-container .project-card,
    #project-container .project-card.in-view,
    .reveal,
    .reveal.is-visible {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
  }
</style>
  </head>
  <body class="antialiased font-body bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">
    <header class="fixed top-4 right-4 z-50">
      <i
        id="theme-icon"
        class="fa-solid fa-sun text-2xl cursor-pointer text-gray-700 dark:text-gray-200"
      ></i>
    </header>

      <slot />
    <!-- Navbar -->
    <div class="fixed bottom-0 left-0 w-full flex justify-center z-50">
      <nav
        id="bottom-navbar"
        class="relative bg-white text-black dark:bg-gray-800 dark:text-gray-100 border border-gray-300 dark:border-gray-700 rounded-full shadow-lg flex justify-around items-center gap-6 px-8 py-3 mb-4 min-w-[90%] md:min-w-[50%]
           transform translate-y-14 opacity-90 transition-all duration-500"
      >
        <button
          id="toggle-btn"
          class="absolute -top-5 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-full shadow p-1 md:hidden"
        >
          <svg
            id="toggle-icon"
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 text-gray-600 transition-transform duration-300"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 15l7-7 7 7"></path>
          </svg>
        </button>
<a
  href="/portotim/#projects"
  class="flex flex-col items-center hover:text-gray-800 dark:hover:text-gray-200"
>
  <i class="fa-solid fa-briefcase text-xl mb-1" aria-hidden="true"></i>
  <span class="text-xs">Projects</span>
</a>

<a
  href="/portotim/about"
  class="flex flex-col items-center hover:text-gray-800 dark:hover:text-gray-200"
>
  <i class="fa-solid fa-circle-info text-xl mb-1" aria-hidden="true"></i>
  <span class="text-xs">About</span>
</a>

<a
  href="/portotim/contact"
  class="flex flex-col items-center hover:text-gray-800 dark:hover:text-gray-200"
>
  <i class="fa-solid fa-envelope text-xl mb-1" aria-hidden="true"></i>
  <span class="text-xs">Contact</span>
</a>

      </nav>
    </div>

<footer class="reveal border-t bg-gray-50 dark:bg-gray-900 dark:border-gray-800" style="--d:120ms">
  <div
    class="container-narrow mx-auto px-4 py-8 text-sm text-muted-foreground flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"
    aria-label="Situs footer"
  >
        <p class="order-2 sm:order-1 flex items-center gap-3">
          © {year} Tim Kami
          <span class="hidden sm:inline">•</span>
          <span class="flex items-center gap-2">
            Dibuat oleh
            <a
              href="https://github.com/ahr-ahr"
              target="_blank"
              rel="noopener"
              class="group inline-flex items-center gap-1 hover:text-foreground"
              title="Profil GitHub Haikal"
            >
              <i class="fa-brands fa-github" aria-hidden="true"></i>
              <span>Haikal</span>
              <span class="sr-only"> (profil GitHub)</span>
            </a>
            &
            <a
              href="https://github.com/briangtg"
              target="_blank"
              rel="noopener"
              class="group inline-flex items-center gap-1 hover:text-foreground"
              title="Profil GitHub Brian"
            >
              <i class="fa-brands fa-github" aria-hidden="true"></i>
              <span>Brian</span>
              <span class="sr-only"> (profil GitHub)</span>
            </a>
          </span>
        </p>

        <p class="order-1 sm:order-2 flex items-center gap-3">
          <span class="inline-flex items-center gap-1">
            <i class="fa-solid fa-star-half-stroke" aria-hidden="true"></i>
            <span>
              Powered by <a
                href="https://astro.build"
                target="_blank"
                rel="noopener"
                class="underline underline-offset-4 hover:no-underline">Astro</a
              >
            </span>
          </span>

          <span class="hidden sm:inline">•</span>

          <span class="inline-flex items-center gap-1">
            <i class="fa-solid fa-wind" aria-hidden="true"></i>
            <a
              href="https://tailwindcss.com"
              target="_blank"
              rel="noopener"
              class="underline underline-offset-4 hover:no-underline"
              >Tailwind</a
            >
          </span>

          <span class="hidden sm:inline">•</span>

          <span class="inline-flex items-center gap-1">
            <i class="fa-solid fa-file-code" aria-hidden="true"></i>
            <a
              href="https://pages.github.com"
              target="_blank"
              rel="noopener"
              class="underline underline-offset-4 hover:no-underline"
              >GitHub Pages</a
            >
          </span>
        </p>
      </div>
    </footer>
    <!-- Tombol Scroll to Top -->
<button
  id="scrollTopBtn"
  class="hidden fixed bottom-6 right-6 z-50 bg-black text-white dark:bg-gray-100 dark:text-gray-900
         w-12 h-12 rounded-full items-center justify-center
         shadow-lg hover:bg-gray-800 dark:hover:bg-gray-200 transition
         focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-700 dark:focus:ring-gray-300 dark:focus:ring-offset-gray-900"
  aria-label="Scroll to top"
>
  <i class="fas fa-arrow-up text-sm"></i>
</button>

    <script is:inline>
      document.addEventListener("DOMContentLoaded", () => {
    const themeIcon = document.getElementById("theme-icon");
    const prefers = window.matchMedia("(prefers-color-scheme: dark)");
    const metaTheme = document.querySelector('meta[name="theme-color"]');

    // Helper
    const applyIcon = () => {
      const dark = document.documentElement.classList.contains("dark");
      themeIcon.classList.toggle("fa-sun", !dark);
      themeIcon.classList.toggle("fa-moon", dark);
      themeIcon.setAttribute("aria-pressed", String(dark));
      if (metaTheme) metaTheme.setAttribute("content", dark ? "#0b0f19" : "#ffffff");
    };

    // Inisialisasi dari localStorage (sudah di-handle no-flash), tinggal sinkron ikon
    applyIcon();

    // Klik toggle: simpan ke localStorage
    themeIcon.addEventListener("click", () => {
      const isDark = document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
      applyIcon();
    });

    // Jika user ubah preferensi sistem & user belum memilih manual => ikuti sistem
    prefers.addEventListener("change", (e) => {
      if (!localStorage.getItem("theme")) {
        document.documentElement.classList.toggle("dark", e.matches);
        applyIcon();
      }
    });
  });

      document.addEventListener("DOMContentLoaded", () => {
        const navbar = document.getElementById("bottom-navbar");
        const toggleBtn = document.getElementById("toggle-btn");
        const toggleIcon = document.getElementById("toggle-icon");

        let expanded = false;

        if (window.innerWidth >= 768) {
          const hoverArea = document.createElement("div");
          hoverArea.className = "absolute bottom-0 w-full h-6 bg-transparent";
          document.body.appendChild(hoverArea);

          let hideTimeout;
          const showNavbar = () => {
            clearTimeout(hideTimeout);
            navbar.classList.remove("translate-y-14", "opacity-90");
            navbar.classList.add("translate-y-0", "opacity-100");
          };
          const hideNavbar = () => {
            hideTimeout = setTimeout(() => {
              navbar.classList.remove("translate-y-0", "opacity-100");
              navbar.classList.add("translate-y-14", "opacity-90");
            }, 2000);
          };

          hoverArea.addEventListener("mouseenter", showNavbar);
          navbar.addEventListener("mouseenter", showNavbar);
          navbar.addEventListener("mouseleave", hideNavbar);
          hoverArea.addEventListener("mouseleave", hideNavbar);
        }

        toggleBtn.addEventListener("click", () => {
          expanded = !expanded;
          if (expanded) {
            navbar.classList.remove("translate-y-14");
            navbar.classList.add("translate-y-0");
            toggleIcon.classList.add("rotate-180");
          } else {
            navbar.classList.remove("translate-y-0");
            navbar.classList.add("translate-y-14");
            toggleIcon.classList.remove("rotate-180");
          }
        });
      });

      // Toggle up
       const scrollBtn = document.getElementById("scrollTopBtn");

  // Tampilkan tombol setelah scroll 300px
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      scrollBtn.classList.remove("hidden");
    } else {
      scrollBtn.classList.add("hidden");
    }
  });

  // Scroll ke atas saat klik tombol
  scrollBtn.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth"
    });
  });

  (() => {
    const reveals = document.querySelectorAll('.reveal');
    if (!('IntersectionObserver' in window) || !reveals.length) {
      // Fallback: tampilkan langsung
      reveals.forEach(el => el.classList.add('is-visible'));
      return;
    }
    const io = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          obs.unobserve(entry.target); // animasi sekali saja
        }
      });
    }, {
      root: null,
      rootMargin: '0px 0px -10% 0px', // sedikit lebih cepat muncul
      threshold: 0.1
    });
    reveals.forEach(el => io.observe(el));
  })();
    </script>
  </body>
</html>
